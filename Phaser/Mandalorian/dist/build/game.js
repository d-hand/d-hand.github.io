!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(1);var o=i(n(3)),r={type:Phaser.WEBGL,width:800,height:600,backgroundColor:"#2d2d2d",scene:o.default};new Phaser.Game(r)},function(t,e,n){t.exports=n(2)(1)},function(t,e){t.exports=vendor},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),s=function(t){function e(){return t.call(this,"MandalorianScene")||this}return o(e,t),e.prototype.preload=function(){this.load.image("mandalorian","assets/mandalorian.png"),this.load.image("bullets","assets/bullets.png")},e.prototype.create=function(){this.mandalorian=new r.Mandalorian(this),this.input.on("pointerdown",(function(t){})),this.input.on("pointermove",(function(t){})),this.input.on("pointerup",(function(t){}))},e.prototype.update=function(t,e){this.mandalorian.update(t,e)},e}(Phaser.Scene);e.default=s},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Mandalorian=void 0;var r=n(5),s=function(t){function e(e){var n=t.call(this,e,400,300,"mandalorian")||this;return n.mouseX=0,n.mouseY=0,n.lastFired=0,n.step=2,n.setDepth(1),e.add.existing(n),n.bullets=e.add.group({classType:r.Bullet,maxSize:50,runChildUpdate:!0}),e.input.on("pointerdown",(function(t){n.isFire=!0,n.mouseX=t.x,n.mouseX=t.y})),e.input.on("pointermove",(function(t){n.mouseX=t.x,n.mouseY=t.y})),e.input.on("pointerup",(function(){n.isFire=!1})),n.keyW=e.input.keyboard.addKey("W"),n.keyA=e.input.keyboard.addKey("A"),n.keyS=e.input.keyboard.addKey("S"),n.keyD=e.input.keyboard.addKey("D"),n}return o(e,t),e.prototype.update=function(t,e){if(this.isFire&&t>this.lastFired){var n=this.bullets.get();n&&(n.fire(this.x,this.y,this.mouseX,this.mouseY),this.lastFired=t+50)}var i=this.x,o=this.y;this.keyW.isDown&&(o-=this.step),this.keyS.isDown&&(o+=this.step),this.keyD.isDown&&(i+=this.step),this.keyA.isDown&&(i-=this.step),this.setPosition(i,o),this.setRotation(Phaser.Math.Angle.Between(this.mouseX,this.mouseY,this.x,this.y)-Math.PI/2)},e}(Phaser.GameObjects.Sprite);e.Mandalorian=s},function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Bullet=void 0;var r=function(t){function e(e){var n=t.call(this,e,0,0,"bullets")||this;return n.incX=0,n.incY=0,n.lifespan=0,n.speed=Phaser.Math.GetSpeed(600,1),n}return o(e,t),e.prototype.fire=function(t,e,n,i){this.setActive(!0),this.setVisible(!0),this.setPosition(t,e);var o=Phaser.Math.Angle.Between(n,i,t,e);this.setRotation(o),this.incX=Math.cos(o),this.incY=Math.sin(o),this.lifespan=1e3},e.prototype.update=function(t,e){this.lifespan-=e,this.x-=this.incX*(this.speed*e),this.y-=this.incY*(this.speed*e),this.lifespan<=0&&(this.setActive(!1),this.setVisible(!1))},e}(Phaser.GameObjects.Image);e.Bullet=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0dhbWUudHMiLCJ3ZWJwYWNrOi8vL2RlbGVnYXRlZCAuL25vZGVfbW9kdWxlcy9waGFzZXIvZGlzdC9waGFzZXIuanMgZnJvbSBkbGwtcmVmZXJlbmNlIHZlbmRvciIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ2ZW5kb3JcIiIsIndlYnBhY2s6Ly8vLi9zcmMvU2NlbmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hbmRhbG9yaWFuLnRzIiwid2VicGFjazovLy8uL3NyYy9CdWxsZXQudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJjb25maWciLCJ0eXBlIiwiUGhhc2VyIiwiV0VCR0wiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmRDb2xvciIsInNjZW5lIiwiR2FtZSIsInZlbmRvciIsInByZWxvYWQiLCJ0aGlzIiwibG9hZCIsImltYWdlIiwibWFuZGFsb3JpYW4iLCJNYW5kYWxvcmlhbiIsImlucHV0Iiwib24iLCJwb2ludGVyIiwidXBkYXRlIiwidGltZSIsImRlbHRhIiwiU2NlbmUiLCJtb3VzZVgiLCJtb3VzZVkiLCJsYXN0RmlyZWQiLCJzdGVwIiwic2V0RGVwdGgiLCJhZGQiLCJleGlzdGluZyIsImJ1bGxldHMiLCJncm91cCIsImNsYXNzVHlwZSIsIkJ1bGxldCIsIm1heFNpemUiLCJydW5DaGlsZFVwZGF0ZSIsImlzRmlyZSIsIngiLCJ5Iiwia2V5VyIsImtleWJvYXJkIiwiYWRkS2V5Iiwia2V5QSIsImtleVMiLCJrZXlEIiwiYnVsbGV0IiwiZmlyZSIsImlzRG93biIsInNldFBvc2l0aW9uIiwic2V0Um90YXRpb24iLCJNYXRoIiwiQW5nbGUiLCJCZXR3ZWVuIiwiUEkiLCJHYW1lT2JqZWN0cyIsIlNwcml0ZSIsImluY1giLCJpbmNZIiwibGlmZXNwYW4iLCJzcGVlZCIsIkdldFNwZWVkIiwiZnJvbVgiLCJmcm9tWSIsInRvWCIsInRvWSIsInNldEFjdGl2ZSIsInNldFZpc2libGUiLCJhbmdsZSIsImNvcyIsInNpbiIsIkltYWdlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8s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QUNmdEQsS0FBS3VELFlBQVcsR0FHaEJ2RCxLQUFLcUMsWUFBWWEsRUFBT0MsR0FFeEIsSUFBSUssRUFBUWpFLE9BQU9nRCxLQUFLQyxNQUFNQyxRQUFRVyxFQUFLQyxFQUFLSCxFQUFPQyxHQUV2RG5ELEtBQUtzQyxZQUFZa0IsR0FFakJ4RCxLQUFLNkMsS0FBT04sS0FBS2tCLElBQUlELEdBQ3JCeEQsS0FBSzhDLEtBQU9QLEtBQUttQixJQUFJRixHQUVyQnhELEtBQUsrQyxTQUFXLEtBR3BCLFlBQUF2QyxPQUFBLFNBQU9DLEVBQVdDLEdBRWRWLEtBQUsrQyxVQUFZckMsRUFFakJWLEtBQUswQixHQUFLMUIsS0FBSzZDLE1BQVE3QyxLQUFLZ0QsTUFBUXRDLEdBQ3BDVixLQUFLMkIsR0FBSzNCLEtBQUs4QyxNQUFROUMsS0FBS2dELE1BQVF0QyxHQUVoQ1YsS0FBSytDLFVBQVksSUFFakIvQyxLQUFLc0QsV0FBVSxHQUNmdEQsS0FBS3VELFlBQVcsS0FHNUIsRUEvQ0EsQ0FBNEJoRSxPQUFPb0QsWUFBWWdCLE9BQWxDLEVBQUFyQyIsImZpbGUiOiJnYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0ICdwaGFzZXInO1xyXG5pbXBvcnQgU2NlbmUgZnJvbSAnLi9TY2VuZSc7XHJcblxyXG5jb25zdCBjb25maWcgPSB7XHJcbiAgICB0eXBlOiBQaGFzZXIuV0VCR0wsXHJcbiAgICB3aWR0aDogODAwLFxyXG4gICAgaGVpZ2h0OiA2MDAsXHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMmQyZDJkJyxcclxuICAgIHNjZW5lOiBTY2VuZVxyXG59O1xyXG5cclxuY29uc3QgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZShjb25maWcpO1xyXG4iLCJtb2R1bGUuZXhwb3J0cyA9IChfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKSgxKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHZlbmRvcjsiLCJpbXBvcnQge0J1bGxldH0gZnJvbSAnLi9CdWxsZXQnO1xyXG5pbXBvcnQgeyBNYW5kYWxvcmlhbiB9IGZyb20gJy4vTWFuZGFsb3JpYW4nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NlbmUgZXh0ZW5kcyBQaGFzZXIuU2NlbmUge1xyXG4gICAgbWFuZGFsb3JpYW46IE1hbmRhbG9yaWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCdNYW5kYWxvcmlhblNjZW5lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlbG9hZCgpIHtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ21hbmRhbG9yaWFuJywgJ2Fzc2V0cy9tYW5kYWxvcmlhbi5wbmcnKTtcclxuICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2J1bGxldHMnLCAnYXNzZXRzL2J1bGxldHMucG5nJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlKCkge1xyXG5cclxuICAgICAgICB0aGlzLm1hbmRhbG9yaWFuID0gbmV3IE1hbmRhbG9yaWFuKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmlucHV0Lm9uKCdwb2ludGVyZG93bicsIChwb2ludGVyKSA9PiB7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgKHBvaW50ZXIpID0+IHtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5pbnB1dC5vbigncG9pbnRlcnVwJywgKHBvaW50ZXIpID0+IHtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgdXBkYXRlKHRpbWU6IGFueSwgZGVsdGE6IGFueSkge1xyXG4gICAgICAgIHRoaXMubWFuZGFsb3JpYW4udXBkYXRlKHRpbWUsIGRlbHRhKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBHYW1lT2JqZWN0cyB9IGZyb20gXCJwaGFzZXJcIjtcclxuaW1wb3J0IHsgQnVsbGV0IH0gZnJvbSBcIi4vQnVsbGV0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWFuZGFsb3JpYW4gZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlIHtcclxuICAgIGJ1bGxldHM6IEdhbWVPYmplY3RzLkdyb3VwO1xyXG4gICAgaXNGaXJlOiBib29sZWFuO1xyXG4gICAgaXNGb3J3YXJkOiBib29sZWFuO1xyXG4gICAgbW91c2VYID0gMDtcclxuICAgIG1vdXNlWSA9IDA7XHJcbiAgICBsYXN0RmlyZWQgPSAwO1xyXG4gICAgc3RlcCA9IDI7XHJcbiAgICBrZXlXOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG4gICAga2V5QTogUGhhc2VyLklucHV0LktleWJvYXJkLktleTtcclxuICAgIGtleVM6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XHJcbiAgICBrZXlEOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG5cclxuICAgIFxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSkge1xyXG4gICAgICAgIHN1cGVyKHNjZW5lLCA0MDAsIDMwMCwgJ21hbmRhbG9yaWFuJyk7XHJcbiAgICAgICAgdGhpcy5zZXREZXB0aCgxKTsgICAgICAgIFxyXG4gICAgICAgIHNjZW5lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5idWxsZXRzID0gc2NlbmUuYWRkLmdyb3VwKHtcclxuICAgICAgICAgICAgY2xhc3NUeXBlOiBCdWxsZXQsXHJcbiAgICAgICAgICAgIG1heFNpemU6IDUwLFxyXG4gICAgICAgICAgICBydW5DaGlsZFVwZGF0ZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcmRvd24nLCAocG9pbnRlcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNGaXJlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVggPSBwb2ludGVyLng7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VYID0gcG9pbnRlci55O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzY2VuZS5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCAocG9pbnRlcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VYID0gcG9pbnRlci54O1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlWSA9IHBvaW50ZXIueTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2NlbmUuaW5wdXQub24oJ3BvaW50ZXJ1cCcsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5pc0ZpcmUgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5rZXlXID0gc2NlbmUuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KCdXJyk7IFxyXG4gICAgICAgIHRoaXMua2V5QSA9IHNjZW5lLmlucHV0LmtleWJvYXJkLmFkZEtleSgnQScpOyBcclxuICAgICAgICB0aGlzLmtleVMgPSBzY2VuZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoJ1MnKTsgXHJcbiAgICAgICAgdGhpcy5rZXlEID0gc2NlbmUuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KCdEJyk7IFxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSh0aW1lLCBkZWx0YSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmlzRmlyZSAmJiB0aW1lID4gdGhpcy5sYXN0RmlyZWQpIHtcclxuICAgICAgICAgICAgdmFyIGJ1bGxldCA9IHRoaXMuYnVsbGV0cy5nZXQoKSBhcyBCdWxsZXQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoYnVsbGV0KSB7XHJcbiAgICAgICAgICAgICAgICBidWxsZXQuZmlyZSh0aGlzLngsIHRoaXMueSwgdGhpcy5tb3VzZVgsIHRoaXMubW91c2VZKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RGaXJlZCA9IHRpbWUgKyA1MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHggPSB0aGlzLng7XHJcbiAgICAgICAgbGV0IHkgPSB0aGlzLnk7XHJcbiAgICAgICAgaWYgKHRoaXMua2V5Vy5pc0Rvd24pIHtcclxuICAgICAgICAgICAgeSAtPSB0aGlzLnN0ZXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmtleVMuaXNEb3duKSB7XHJcbiAgICAgICAgICAgIHkgKz0gdGhpcy5zdGVwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5rZXlELmlzRG93bikge1xyXG4gICAgICAgICAgICB4ICs9IHRoaXMuc3RlcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMua2V5QS5pc0Rvd24pIHtcclxuICAgICAgICAgICAgeCAtPSB0aGlzLnN0ZXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2V0UG9zaXRpb24oeCwgeSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0Um90YXRpb24oUGhhc2VyLk1hdGguQW5nbGUuQmV0d2Vlbih0aGlzLm1vdXNlWCwgdGhpcy5tb3VzZVksIHRoaXMueCwgdGhpcy55KSAtIE1hdGguUEkgLyAyKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBCdWxsZXQgZXh0ZW5kcyBQaGFzZXIuR2FtZU9iamVjdHMuSW1hZ2Uge1xyXG4gICAgaW5jWDogbnVtYmVyO1xyXG4gICAgaW5jWTogbnVtYmVyO1xyXG4gICAgbGlmZXNwYW46IG51bWJlcjtcclxuICAgIHNwZWVkOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFBoYXNlci5TY2VuZSlcclxuICAgIHtcclxuICAgICAgICBzdXBlcihzY2VuZSwgMCwgMCwgJ2J1bGxldHMnKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmNYID0gMDtcclxuICAgICAgICB0aGlzLmluY1kgPSAwO1xyXG4gICAgICAgIHRoaXMubGlmZXNwYW4gPSAwO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBQaGFzZXIuTWF0aC5HZXRTcGVlZCg2MDAsIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpcmUgKGZyb21YOiBudW1iZXIsIGZyb21ZOiBudW1iZXIsIHRvWDogbnVtYmVyLCB0b1k6bnVtYmVyKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcclxuXHJcbiAgICAgICAgLy8gIEJ1bGxldHMgZmlyZSBmcm9tIHRoZSBtaWRkbGUgb2YgdGhlIHNjcmVlbiB0byB0aGUgZ2l2ZW4geC95XHJcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihmcm9tWCwgZnJvbVkpO1xyXG5cclxuICAgICAgICB2YXIgYW5nbGUgPSBQaGFzZXIuTWF0aC5BbmdsZS5CZXR3ZWVuKHRvWCwgdG9ZLCBmcm9tWCwgZnJvbVkpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFJvdGF0aW9uKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmNYID0gTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICAgIHRoaXMuaW5jWSA9IE1hdGguc2luKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgdGhpcy5saWZlc3BhbiA9IDEwMDA7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlKHRpbWU6IGFueSwgZGVsdGE6IGFueSlcclxuICAgIHtcclxuICAgICAgICB0aGlzLmxpZmVzcGFuIC09IGRlbHRhO1xyXG5cclxuICAgICAgICB0aGlzLnggLT0gdGhpcy5pbmNYICogKHRoaXMuc3BlZWQgKiBkZWx0YSk7XHJcbiAgICAgICAgdGhpcy55IC09IHRoaXMuaW5jWSAqICh0aGlzLnNwZWVkICogZGVsdGEpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5saWZlc3BhbiA8PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9