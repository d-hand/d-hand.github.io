!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.RocketFactory=e.Rocket=void 0;var r=function(t){function e(e){var n=t.call(this,e,0,0,a.rocketImage)||this;return n.displayHeight=7,n.displayWidth=15,n.incX=0,n.incY=0,n.lifespan=0,n.speed=Phaser.Math.GetSpeed(400,1),n}return i(e,t),e.prototype.activate=function(t,e,n,o){this.setActive(!0),this.setVisible(!0),this.setPosition(t,e);var i=Phaser.Math.Angle.Between(n,o,t,e);this.setRotation(i),this.incX=Math.cos(i),this.incY=Math.sin(i),this.lifespan=600},e.prototype.update=function(t,e){if(this.lifespan-=e,this.x-=this.incX*(this.speed*e),this.y-=this.incY*(this.speed*e),this.lifespan<=0){this.setActive(!1),this.setVisible(!1);var n=this.scene.add.sprite(this.x,this.y,a.boomImage);n.play(a.explodeKey),n.once(Phaser.Animations.Events.SPRITE_ANIMATION_COMPLETE,(function(){return n.destroy()})),this.destroy(),console.log("destroy")}},e}(Phaser.GameObjects.Image);e.Rocket=r;var a=function(){function t(){}return t.load=function(e){e.load.image({key:t.rocketImage,url:"assets/rocket.png"}),e.load.spritesheet(t.boomImage,"assets/rocket-explosion.png",{frameWidth:64,frameHeight:64,endFrame:23})},t.addAnimationToScene=function(e){var n=e.anims.create({key:t.explodeKey,frames:e.anims.generateFrameNames(t.boomImage),hideOnComplete:!0});if(!1===n)throw new Error;return n},t.rocketImage="rocket",t.boomImage="boom",t.explodeKey="explode",t}();e.RocketFactory=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(2);var o=n(4),i={type:Phaser.WEBGL,width:800,height:600,backgroundColor:"#2d2d2d",scene:o.Scene};new Phaser.Game(i)},function(t,e,n){t.exports=n(3)(1)},function(t,e){t.exports=vendor},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;var r=n(0),a=n(5),s=n(6),c=n(7),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.preload=function(){r.RocketFactory.load(this),a.MandalorianFactory.load(this)},e.prototype.create=function(){this.rocketAnimation=r.RocketFactory.addAnimationToScene(this),this.rocketGroup=c.RocketGunFactory.addRocketGroupToScene(this),this.rocketGun=new c.RocketGun(this),this.mandalorianWeapons=new s.MandalorianWeapons(this),this.mandalorianSprite=a.MandalorianFactory.addMandalorianSpriteToScene(this),this.mandalorian=new a.Mandalorian(this)},e.prototype.update=function(t,e){this.mandalorian.update(t,e)},e}(Phaser.Scene);e.Scene=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MandalorianFactory=e.Mandalorian=void 0;var o=function(){function t(t){var e=this;this.mouseX=0,this.mouseY=0,this.speed=Phaser.Math.GetSpeed(100,1),this.sprite=t.mandalorianSprite,this.weapons=t.mandalorianWeapons,t.input.on(Phaser.Input.Events.POINTER_DOWN,(function(t){e.isAttack=!0})),t.input.on(Phaser.Input.Events.POINTER_UP,(function(){e.isAttack=!1})),t.input.on(Phaser.Input.Events.POINTER_MOVE,(function(t){e.mouseX=t.x,e.mouseY=t.y})),this.keyW=t.input.keyboard.addKey("W"),this.keyA=t.input.keyboard.addKey("A"),this.keyS=t.input.keyboard.addKey("S"),this.keyD=t.input.keyboard.addKey("D")}return t.prototype.update=function(t,e){this.isAttack&&this.weapons.activate(t,this.sprite.x,this.sprite.y,this.mouseX,this.mouseY),this.sprite.x+=e*this.speed*(Number(this.keyD.isDown)-Number(this.keyA.isDown)),this.sprite.y+=e*this.speed*(Number(this.keyS.isDown)-Number(this.keyW.isDown)),this.sprite.setRotation(Phaser.Math.Angle.Between(this.mouseX,this.mouseY,this.sprite.x,this.sprite.y)-Math.PI/2)},t}();e.Mandalorian=o;var i=function(){function t(){}return t.load=function(e){e.load.image(t.mandalorianSprite,"assets/mandalorian.png")},t.addMandalorianSpriteToScene=function(e){return e.add.sprite(400,300,t.mandalorianSprite).setDepth(1)},t.mandalorianSprite="mandalorianSprite",t}();e.MandalorianFactory=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MandalorianWeapons=void 0;var o=function(){function t(t){this.rocketGun=t.rocketGun}return t.prototype.activate=function(t,e,n,o,i){this.rocketGun.activate(t,e,n,o,i)},t}();e.MandalorianWeapons=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RocketGunFactory=e.RocketGun=void 0;var o=n(0),i=function(){function t(t){this.lastRocketFired=0,this.rocketGroup=t.rocketGroup}return t.prototype.activate=function(t,e,n,o,i){if(t>this.lastRocketFired){var r=this.rocketGroup.get();r&&(r.activate(e,n,o,i),this.lastRocketFired=t+600)}},t}();e.RocketGun=i;var r=function(){function t(){}return t.addRocketGroupToScene=function(t){return t.add.group({classType:o.Rocket,maxSize:20,runChildUpdate:!0})},t}();e.RocketGunFactory=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1JvY2tldC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvR2FtZS50cyIsIndlYnBhY2s6Ly8vZGVsZWdhdGVkIC4vbm9kZV9tb2R1bGVzL3BoYXNlci9kaXN0L3BoYXNlci5qcyBmcm9tIGRsbC1yZWZlcmVuY2UgdmVuZG9yIiwid2VicGFjazovLy9leHRlcm5hbCBcInZlbmRvclwiIiwid2VicGFjazovLy8uL3NyYy9TY2VuZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvTWFuZGFsb3JpYW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL01hbmRhbG9yaWFuV2VhcG9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvUm9ja2V0R3VuLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwic2NlbmUiLCJSb2NrZXRGYWN0b3J5Iiwicm9ja2V0SW1hZ2UiLCJkaXNwbGF5SGVpZ2h0IiwiZGlzcGxheVdpZHRoIiwiaW5jWCIsImluY1kiLCJsaWZlc3BhbiIsInNwZWVkIiwiUGhhc2VyIiwiTWF0aCIsIkdldFNwZWVkIiwiYWN0aXZhdGUiLCJ4MSIsInkxIiwieDIiLCJ5MiIsInRoaXMiLCJzZXRBY3RpdmUiLCJzZXRWaXNpYmxlIiwic2V0UG9zaXRpb24iLCJhbmdsZSIsIkFuZ2xlIiwiQmV0d2VlbiIsInNldFJvdGF0aW9uIiwiY29zIiwic2luIiwidXBkYXRlIiwidGltZSIsImRlbHRhIiwieCIsInkiLCJhZGQiLCJzcHJpdGUiLCJib29tSW1hZ2UiLCJwbGF5IiwiZXhwbG9kZUtleSIsIm9uY2UiLCJBbmltYXRpb25zIiwiRXZlbnRzIiwiU1BSSVRFX0FOSU1BVElPTl9DT01QTEVURSIsImRlc3Ryb3kiLCJjb25zb2xlIiwibG9nIiwiR2FtZU9iamVjdHMiLCJJbWFnZSIsIlJvY2tldCIsImxvYWQiLCJpbWFnZSIsInVybCIsInNwcml0ZXNoZWV0IiwiZnJhbWVXaWR0aCIsImZyYW1lSGVpZ2h0IiwiZW5kRnJhbWUiLCJhZGRBbmltYXRpb25Ub1NjZW5lIiwicmVzdWx0IiwiYW5pbXMiLCJmcmFtZXMiLCJnZW5lcmF0ZUZyYW1lTmFtZXMiLCJoaWRlT25Db21wbGV0ZSIsIkVycm9yIiwiY29uZmlnIiwidHlwZSIsIldFQkdMIiwid2lkdGgiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJTY2VuZSIsIkdhbWUiLCJ2ZW5kb3IiLCJwcmVsb2FkIiwiTWFuZGFsb3JpYW5GYWN0b3J5Iiwicm9ja2V0QW5pbWF0aW9uIiwicm9ja2V0R3JvdXAiLCJSb2NrZXRHdW5GYWN0b3J5IiwiYWRkUm9ja2V0R3JvdXBUb1NjZW5lIiwicm9ja2V0R3VuIiwiUm9ja2V0R3VuIiwibWFuZGFsb3JpYW5XZWFwb25zIiwiTWFuZGFsb3JpYW5XZWFwb25zIiwibWFuZGFsb3JpYW5TcHJpdGUiLCJhZGRNYW5kYWxvcmlhblNwcml0ZVRvU2NlbmUiLCJtYW5kYWxvcmlhbiIsIk1hbmRhbG9yaWFuIiwibW91c2VYIiwibW91c2VZIiwid2VhcG9ucyIsImlucHV0Iiwib24iLCJJbnB1dCIsIlBPSU5URVJfRE9XTiIsInBvaW50ZXIiLCJpc0F0dGFjayIsIlBPSU5URVJfVVAiLCJQT0lOVEVSX01PVkUiLCJrZXlXIiwia2V5Ym9hcmQiLCJhZGRLZXkiLCJrZXlBIiwia2V5UyIsImtleUQiLCJOdW1iZXIiLCJpc0Rvd24iLCJQSSIsInNldERlcHRoIiwibGFzdFJvY2tldEZpcmVkIiwicm9ja2V0IiwiZ3JvdXAiLCJjbGFzc1R5cGUiLCJtYXhTaXplIiwicnVuQ2hpbGRVcGRhdGUiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENB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cEQsRUFBQUMsNEJBQVAsU0FBbUNqRixHQUMvQixPQUFPQSxFQUFNZ0MsSUFBSUMsT0FBTyxJQUFLLElBQUtzQyxFQUFtQlMsbUJBQW1Cd0IsU0FBUyxJQVByRSxFQUFBeEIsa0JBQW9CLG9CQVN4QyxFQVZBLEdBQWEsRUFBQVQsc0IsMEdDcERiLGlCQUlJLFdBQVl2RSxHQUNSaUIsS0FBSzJELFVBQVk1RSxFQUFNNEUsVUFPL0IsT0FISSxZQUFBaEUsU0FBQSxTQUFTZ0IsRUFBY2YsRUFBWUMsRUFBWUMsRUFBWUMsR0FDdkRDLEtBQUsyRCxVQUFVaEUsU0FBU2dCLEVBQU1mLEVBQUlDLEVBQUlDLEVBQUlDLElBRWxELEVBWkEsR0FBYSxFQUFBK0Qsc0Isb0hDSGIsV0FHQSxhQUlJLFdBQVkvRSxHQUZaLEtBQUF5RyxnQkFBa0IsRUFHZHhGLEtBQUt3RCxZQUFjekUsRUFBTXlFLFlBY2pDLE9BWEksWUFBQTdELFNBQUEsU0FBU2dCLEVBQWNmLEVBQVlDLEVBQVlDLEVBQVlDLEdBQ3ZELEdBQUlZLEVBQU9YLEtBQUt3RixnQkFBaUIsQ0FDN0IsSUFBSUMsRUFBU3pGLEtBQUt3RCxZQUFZNUYsTUFFMUI2SCxJQUNBQSxFQUFPOUYsU0FBU0MsRUFBSUMsRUFBSUMsRUFBSUMsR0FFNUJDLEtBQUt3RixnQkFBa0I3RSxFQUFPLE9BSTlDLEVBbkJBLEdBQWEsRUFBQWlELFlBcUJiLCtCQVFBLE9BUFcsRUFBQUYsc0JBQVAsU0FBNkIzRSxHQUN6QixPQUFPQSxFQUFNZ0MsSUFBSTJFLE1BQU0sQ0FDbkJDLFVBQVcsRUFBQTlELE9BQ1grRCxRQUFTLEdBQ1RDLGdCQUFnQixLQUc1QixFQVJBLEdBQWEsRUFBQXBDIiwiZmlsZSI6ImdhbWUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9TY2VuZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJvY2tldCBleHRlbmRzIFBoYXNlci5HYW1lT2JqZWN0cy5JbWFnZSB7XHJcbiAgICBpbmNYOiBudW1iZXI7XHJcbiAgICBpbmNZOiBudW1iZXI7XHJcbiAgICBsaWZlc3BhbjogbnVtYmVyO1xyXG4gICAgc3BlZWQ6IG51bWJlcjtcclxuICAgIGJvb21TcHJpdGU6IFBoYXNlci5HYW1lT2JqZWN0cy5TcHJpdGU7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lKSB7XHJcbiAgICAgICAgc3VwZXIoc2NlbmUsIDAsIDAsIFJvY2tldEZhY3Rvcnkucm9ja2V0SW1hZ2UpO1xyXG5cclxuICAgICAgICB0aGlzLmRpc3BsYXlIZWlnaHQgPSA3O1xyXG4gICAgICAgIHRoaXMuZGlzcGxheVdpZHRoID0gMTU7XHJcbiAgICAgICAgdGhpcy5pbmNYID0gMDtcclxuICAgICAgICB0aGlzLmluY1kgPSAwO1xyXG4gICAgICAgIHRoaXMubGlmZXNwYW4gPSAwO1xyXG4gICAgICAgIHRoaXMuc3BlZWQgPSBQaGFzZXIuTWF0aC5HZXRTcGVlZCg0MDAsIDEpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBhY3RpdmF0ZSh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5zZXRWaXNpYmxlKHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHgxLCB5MSk7XHJcblxyXG4gICAgICAgIHZhciBhbmdsZSA9IFBoYXNlci5NYXRoLkFuZ2xlLkJldHdlZW4oeDIsIHkyLCB4MSwgeTEpO1xyXG5cclxuICAgICAgICB0aGlzLnNldFJvdGF0aW9uKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgdGhpcy5pbmNYID0gTWF0aC5jb3MoYW5nbGUpO1xyXG4gICAgICAgIHRoaXMuaW5jWSA9IE1hdGguc2luKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgdGhpcy5saWZlc3BhbiA9IDYwMDtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUodGltZTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5saWZlc3BhbiAtPSBkZWx0YTtcclxuXHJcbiAgICAgICAgdGhpcy54IC09IHRoaXMuaW5jWCAqICh0aGlzLnNwZWVkICogZGVsdGEpO1xyXG4gICAgICAgIHRoaXMueSAtPSB0aGlzLmluY1kgKiAodGhpcy5zcGVlZCAqIGRlbHRhKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubGlmZXNwYW4gPD0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBleHBsb3Npb25TcHJpdGUgPSB0aGlzLnNjZW5lLmFkZC5zcHJpdGUodGhpcy54LCB0aGlzLnksIFJvY2tldEZhY3RvcnkuYm9vbUltYWdlKTtcclxuICAgICAgICAgICAgZXhwbG9zaW9uU3ByaXRlLnBsYXkoUm9ja2V0RmFjdG9yeS5leHBsb2RlS2V5KTtcclxuICAgICAgICAgICAgZXhwbG9zaW9uU3ByaXRlLm9uY2UoUGhhc2VyLkFuaW1hdGlvbnMuRXZlbnRzLlNQUklURV9BTklNQVRJT05fQ09NUExFVEUsICgpID0+IGV4cGxvc2lvblNwcml0ZS5kZXN0cm95KCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGVzdHJveScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJvY2tldEZhY3Rvcnkge1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IHJvY2tldEltYWdlID0gJ3JvY2tldCc7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgYm9vbUltYWdlID0gJ2Jvb20nO1xyXG4gICAgc3RhdGljIHJlYWRvbmx5IGV4cGxvZGVLZXkgPSAnZXhwbG9kZSdcclxuXHJcbiAgICBzdGF0aWMgbG9hZChzY2VuZTogU2NlbmUpIHtcclxuICAgICAgICBzY2VuZS5sb2FkLmltYWdlKHtcclxuICAgICAgICAgICAga2V5OiBSb2NrZXRGYWN0b3J5LnJvY2tldEltYWdlLFxyXG4gICAgICAgICAgICB1cmw6ICdhc3NldHMvcm9ja2V0LnBuZycsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNjZW5lLmxvYWQuc3ByaXRlc2hlZXQoUm9ja2V0RmFjdG9yeS5ib29tSW1hZ2UsICdhc3NldHMvcm9ja2V0LWV4cGxvc2lvbi5wbmcnLCB7IGZyYW1lV2lkdGg6IDY0LCBmcmFtZUhlaWdodDogNjQsIGVuZEZyYW1lOiAyMyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkQW5pbWF0aW9uVG9TY2VuZShzY2VuZTogU2NlbmUpIHtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gc2NlbmUuYW5pbXMuY3JlYXRlKHtcclxuICAgICAgICAgICAga2V5OiBSb2NrZXRGYWN0b3J5LmV4cGxvZGVLZXksXHJcbiAgICAgICAgICAgIGZyYW1lczogc2NlbmUuYW5pbXMuZ2VuZXJhdGVGcmFtZU5hbWVzKFJvY2tldEZhY3RvcnkuYm9vbUltYWdlKSxcclxuICAgICAgICAgICAgaGlkZU9uQ29tcGxldGU6IHRydWVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0ICdwaGFzZXInO1xyXG5pbXBvcnQge1NjZW5lfSBmcm9tICcuL1NjZW5lJztcclxuXHJcbmNvbnN0IGNvbmZpZyA9IHtcclxuICAgIHR5cGU6IFBoYXNlci5XRUJHTCxcclxuICAgIHdpZHRoOiA4MDAsXHJcbiAgICBoZWlnaHQ6IDYwMCxcclxuICAgIGJhY2tncm91bmRDb2xvcjogJyMyZDJkMmQnLFxyXG4gICAgc2NlbmU6IFNjZW5lXHJcbn07XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IFBoYXNlci5HYW1lKGNvbmZpZyk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gKF9fd2VicGFja19yZXF1aXJlX18oMykpKDEpOyIsIm1vZHVsZS5leHBvcnRzID0gdmVuZG9yOyIsImltcG9ydCB7IFJvY2tldCwgUm9ja2V0RmFjdG9yeSB9IGZyb20gJy4vUm9ja2V0JztcclxuaW1wb3J0IHsgTWFuZGFsb3JpYW4sIE1hbmRhbG9yaWFuRmFjdG9yeSB9IGZyb20gJy4vTWFuZGFsb3JpYW4nO1xyXG5pbXBvcnQgeyBNYW5kYWxvcmlhbldlYXBvbnMgfSBmcm9tICcuL01hbmRhbG9yaWFuV2VhcG9ucyc7XHJcbmltcG9ydCB7IFJvY2tldEd1biwgUm9ja2V0R3VuRmFjdG9yeSB9IGZyb20gXCIuL1JvY2tldEd1blwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNjZW5lIGV4dGVuZHMgUGhhc2VyLlNjZW5lIHtcclxuICAgIHJvY2tldEFuaW1hdGlvbjogUGhhc2VyLkFuaW1hdGlvbnMuQW5pbWF0aW9uO1xyXG4gICAgcm9ja2V0R3VuOiBSb2NrZXRHdW47XHJcbiAgICByb2NrZXRHcm91cDogUGhhc2VyLkdhbWVPYmplY3RzLkdyb3VwOyAgICBcclxuICAgIG1hbmRhbG9yaWFuV2VhcG9uczogTWFuZGFsb3JpYW5XZWFwb25zOyAgICBcclxuICAgIG1hbmRhbG9yaWFuU3ByaXRlOiBQaGFzZXIuR2FtZU9iamVjdHMuU3ByaXRlO1xyXG4gICAgbWFuZGFsb3JpYW46IE1hbmRhbG9yaWFuO1xyXG5cclxuICAgIHByZWxvYWQoKSB7XHJcbiAgICAgICAgUm9ja2V0RmFjdG9yeS5sb2FkKHRoaXMpO1xyXG4gICAgICAgIE1hbmRhbG9yaWFuRmFjdG9yeS5sb2FkKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZSgpIHtcclxuICAgICAgICB0aGlzLnJvY2tldEFuaW1hdGlvbiA9IFJvY2tldEZhY3RvcnkuYWRkQW5pbWF0aW9uVG9TY2VuZSh0aGlzKTtcclxuICAgICAgICB0aGlzLnJvY2tldEdyb3VwID0gUm9ja2V0R3VuRmFjdG9yeS5hZGRSb2NrZXRHcm91cFRvU2NlbmUodGhpcyk7XHJcbiAgICAgICAgdGhpcy5yb2NrZXRHdW4gPSBuZXcgUm9ja2V0R3VuKHRoaXMpO1xyXG4gICAgICAgIHRoaXMubWFuZGFsb3JpYW5XZWFwb25zID0gbmV3IE1hbmRhbG9yaWFuV2VhcG9ucyh0aGlzKTtcclxuICAgICAgICB0aGlzLm1hbmRhbG9yaWFuU3ByaXRlID0gTWFuZGFsb3JpYW5GYWN0b3J5LmFkZE1hbmRhbG9yaWFuU3ByaXRlVG9TY2VuZSh0aGlzKTtcclxuICAgICAgICB0aGlzLm1hbmRhbG9yaWFuID0gbmV3IE1hbmRhbG9yaWFuKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZSh0aW1lOiBudW1iZXIsIGRlbHRhOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLm1hbmRhbG9yaWFuLnVwZGF0ZSh0aW1lLCBkZWx0YSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBNYW5kYWxvcmlhbldlYXBvbnMgfSBmcm9tIFwiLi9NYW5kYWxvcmlhbldlYXBvbnNcIjtcclxuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9TY2VuZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hbmRhbG9yaWFuIHtcclxuICAgIHNwcml0ZTogUGhhc2VyLkdhbWVPYmplY3RzLlNwcml0ZTtcclxuICAgIHdlYXBvbnM6IE1hbmRhbG9yaWFuV2VhcG9ucztcclxuXHJcbiAgICBpc0F0dGFjazogYm9vbGVhbjtcclxuXHJcbiAgICBtb3VzZVggPSAwO1xyXG4gICAgbW91c2VZID0gMDtcclxuXHJcbiAgICBrZXlXOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG4gICAga2V5QTogUGhhc2VyLklucHV0LktleWJvYXJkLktleTtcclxuICAgIGtleVM6IFBoYXNlci5JbnB1dC5LZXlib2FyZC5LZXk7XHJcbiAgICBrZXlEOiBQaGFzZXIuSW5wdXQuS2V5Ym9hcmQuS2V5O1xyXG5cclxuICAgIHNwZWVkID0gUGhhc2VyLk1hdGguR2V0U3BlZWQoMTAwLCAxKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogU2NlbmUpIHtcclxuICAgICAgICB0aGlzLnNwcml0ZSA9IHNjZW5lLm1hbmRhbG9yaWFuU3ByaXRlO1xyXG4gICAgICAgIHRoaXMud2VhcG9ucyA9IHNjZW5lLm1hbmRhbG9yaWFuV2VhcG9ucztcclxuICAgICAgICBcclxuICAgICAgICBzY2VuZS5pbnB1dC5vbihQaGFzZXIuSW5wdXQuRXZlbnRzLlBPSU5URVJfRE9XTiwgKHBvaW50ZXI6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmlzQXR0YWNrID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2NlbmUuaW5wdXQub24oUGhhc2VyLklucHV0LkV2ZW50cy5QT0lOVEVSX1VQLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNBdHRhY2sgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2NlbmUuaW5wdXQub24oUGhhc2VyLklucHV0LkV2ZW50cy5QT0lOVEVSX01PVkUsIChwb2ludGVyOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVggPSBwb2ludGVyLng7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VZID0gcG9pbnRlci55O1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1vdXNlWCwgdGhpcy5tb3VzZVkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmtleVcgPSBzY2VuZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoJ1cnKTtcclxuICAgICAgICB0aGlzLmtleUEgPSBzY2VuZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoJ0EnKTtcclxuICAgICAgICB0aGlzLmtleVMgPSBzY2VuZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoJ1MnKTtcclxuICAgICAgICB0aGlzLmtleUQgPSBzY2VuZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoJ0QnKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGUodGltZTogbnVtYmVyLCBkZWx0YTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBdHRhY2spIHtcclxuICAgICAgICAgICAgdGhpcy53ZWFwb25zLmFjdGl2YXRlKHRpbWUsIHRoaXMuc3ByaXRlLngsIHRoaXMuc3ByaXRlLnksIHRoaXMubW91c2VYLCB0aGlzLm1vdXNlWSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnNwcml0ZS54ICs9IGRlbHRhICogdGhpcy5zcGVlZCAqIChOdW1iZXIodGhpcy5rZXlELmlzRG93bikgLSBOdW1iZXIodGhpcy5rZXlBLmlzRG93bikpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlLnkgKz0gZGVsdGEgKiB0aGlzLnNwZWVkICogKE51bWJlcih0aGlzLmtleVMuaXNEb3duKSAtIE51bWJlcih0aGlzLmtleVcuaXNEb3duKSk7XHJcblxyXG4gICAgICAgIHRoaXMuc3ByaXRlLnNldFJvdGF0aW9uKFBoYXNlci5NYXRoLkFuZ2xlLkJldHdlZW4odGhpcy5tb3VzZVgsIHRoaXMubW91c2VZLCB0aGlzLnNwcml0ZS54LCB0aGlzLnNwcml0ZS55KSAtIE1hdGguUEkgLyAyKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE1hbmRhbG9yaWFuRmFjdG9yeSB7XHJcbiAgICBzdGF0aWMgcmVhZG9ubHkgbWFuZGFsb3JpYW5TcHJpdGUgPSAnbWFuZGFsb3JpYW5TcHJpdGUnXHJcblxyXG4gICAgc3RhdGljIGxvYWQoc2NlbmU6IFNjZW5lKSB7XHJcbiAgICAgICAgc2NlbmUubG9hZC5pbWFnZShNYW5kYWxvcmlhbkZhY3RvcnkubWFuZGFsb3JpYW5TcHJpdGUsICdhc3NldHMvbWFuZGFsb3JpYW4ucG5nJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZE1hbmRhbG9yaWFuU3ByaXRlVG9TY2VuZShzY2VuZTogU2NlbmUpICB7XHJcbiAgICAgICAgcmV0dXJuIHNjZW5lLmFkZC5zcHJpdGUoNDAwLCAzMDAsIE1hbmRhbG9yaWFuRmFjdG9yeS5tYW5kYWxvcmlhblNwcml0ZSkuc2V0RGVwdGgoMSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBSb2NrZXRHdW4gfSBmcm9tIFwiLi9Sb2NrZXRHdW5cIjtcclxuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9TY2VuZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1hbmRhbG9yaWFuV2VhcG9ucyB7XHJcbiAgICBcclxuICAgIHJvY2tldEd1bjogUm9ja2V0R3VuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZSkge1xyXG4gICAgICAgIHRoaXMucm9ja2V0R3VuID0gc2NlbmUucm9ja2V0R3VuO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhY3RpdmF0ZSh0aW1lOiBudW1iZXIsIHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnJvY2tldEd1bi5hY3RpdmF0ZSh0aW1lLCB4MSwgeTEsIHgyLCB5Mik7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQgeyBSb2NrZXQgfSBmcm9tIFwiLi9Sb2NrZXRcIjtcclxuaW1wb3J0IHsgU2NlbmUgfSBmcm9tIFwiLi9TY2VuZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJvY2tldEd1biB7XHJcbiAgICByb2NrZXRHcm91cDogUGhhc2VyLkdhbWVPYmplY3RzLkdyb3VwO1xyXG4gICAgbGFzdFJvY2tldEZpcmVkID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzY2VuZTogU2NlbmUpIHtcclxuICAgICAgICB0aGlzLnJvY2tldEdyb3VwID0gc2NlbmUucm9ja2V0R3JvdXA7XHJcbiAgICB9XHJcblxyXG4gICAgYWN0aXZhdGUodGltZTogbnVtYmVyLCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRpbWUgPiB0aGlzLmxhc3RSb2NrZXRGaXJlZCkge1xyXG4gICAgICAgICAgICB2YXIgcm9ja2V0ID0gdGhpcy5yb2NrZXRHcm91cC5nZXQoKSBhcyBSb2NrZXQ7XHJcblxyXG4gICAgICAgICAgICBpZiAocm9ja2V0KSB7XHJcbiAgICAgICAgICAgICAgICByb2NrZXQuYWN0aXZhdGUoeDEsIHkxLCB4MiwgeTIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdFJvY2tldEZpcmVkID0gdGltZSArIDYwMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJvY2tldEd1bkZhY3Rvcnkge1xyXG4gICAgc3RhdGljIGFkZFJvY2tldEdyb3VwVG9TY2VuZShzY2VuZTogU2NlbmUpIHtcclxuICAgICAgICByZXR1cm4gc2NlbmUuYWRkLmdyb3VwKHtcclxuICAgICAgICAgICAgY2xhc3NUeXBlOiBSb2NrZXQsXHJcbiAgICAgICAgICAgIG1heFNpemU6IDIwLFxyXG4gICAgICAgICAgICBydW5DaGlsZFVwZGF0ZTogdHJ1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=